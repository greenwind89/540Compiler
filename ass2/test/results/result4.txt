#name "./test/testcases/test4.cl"
#3 CLASS
#4 ELSE
#5 FI
#6 IF
#7 IN
#8 INHERITS
#9 ISVOID
#10 LET
#11 LOOP
#12 POOL
#13 THEN
#14 WHILE
#15 CASE
#16 ESAC
#17 NEW
#18 OF
#19 NOT
#20 BOOL_CONST true
#21 BOOL_CONST false
#30 '+'
#31 '/'
#32 '-'
#33 '*'
#34 '='
#35 '<'
#36 '.'
#37 '~'
#38 ','
#39 ';'
#40 ':'
#41 '('
#42 ')'
#43 '@'
#44 '{'
#45 '}'
#47 DARROW
#48 ASSIGN
#58 STR_CONST "This is a tring"
#60 STR_CONST "This is another string \nwith multiple lines"
#62 STR_CONST "This is a string with escaped symbols \n \t \b \f 0 a \b c d this should work "
#64 STR_CONST "this is a stirng with comment inside (* *)"
#67 INT_CONST 1234567890
#79 ERROR "&"
#80 ERROR "^"
#81 ERROR "%"
#82 ERROR "$"
#83 ERROR ">"
#91 CLASS
#91 TYPEID CellularAutomaton
#91 INHERITS
#91 TYPEID IO
#91 '{'
#92 OBJECTID population_map
#92 ':'
#92 TYPEID String
#92 ';'
#94 OBJECTID init
#94 '('
#94 OBJECTID map
#94 ':'
#94 TYPEID String
#94 ')'
#94 ':'
#94 TYPEID SELF_TYPE
#94 '{'
#95 '{'
#96 OBJECTID population_map
#96 ASSIGN
#96 OBJECTID map
#96 ';'
#97 OBJECTID self
#97 ';'
#98 '}'
#99 '}'
#99 ';'
#101 OBJECTID print
#101 '('
#101 ')'
#101 ':'
#101 TYPEID SELF_TYPE
#101 '{'
#102 '{'
#103 OBJECTID out_string
#103 '('
#103 OBJECTID population_map
#103 '.'
#103 OBJECTID concat
#103 '('
#103 STR_CONST "\n"
#103 ')'
#103 ')'
#103 ';'
#104 OBJECTID self
#104 ';'
#105 '}'
#106 '}'
#106 ';'
#108 OBJECTID num_cells
#108 '('
#108 ')'
#108 ':'
#108 TYPEID Int
#108 '{'
#109 OBJECTID population_map
#109 '.'
#109 OBJECTID length
#109 '('
#109 ')'
#110 '}'
#110 ';'
#112 OBJECTID cell
#112 '('
#112 OBJECTID position
#112 ':'
#112 TYPEID Int
#112 ')'
#112 ':'
#112 TYPEID String
#112 '{'
#113 OBJECTID population_map
#113 '.'
#113 OBJECTID substr
#113 '('
#113 OBJECTID position
#113 ','
#113 INT_CONST 1
#113 ')'
#114 '}'
#114 ';'
#116 OBJECTID cell_left_neighbor
#116 '('
#116 OBJECTID position
#116 ':'
#116 TYPEID Int
#116 ')'
#116 ':'
#116 TYPEID String
#116 '{'
#117 IF
#117 OBJECTID position
#117 '='
#117 INT_CONST 0
#117 THEN
#118 OBJECTID cell
#118 '('
#118 OBJECTID num_cells
#118 '('
#118 ')'
#118 '-'
#118 INT_CONST 1
#118 ')'
#119 ELSE
#120 OBJECTID cell
#120 '('
#120 OBJECTID position
#120 '-'
#120 INT_CONST 1
#120 ')'
#121 FI
#122 '}'
#122 ';'
#124 OBJECTID cell_right_neighbor
#124 '('
#124 OBJECTID position
#124 ':'
#124 TYPEID Int
#124 ')'
#124 ':'
#124 TYPEID String
#124 '{'
#125 IF
#125 OBJECTID position
#125 '='
#125 OBJECTID num_cells
#125 '('
#125 ')'
#125 '-'
#125 INT_CONST 1
#125 THEN
#126 OBJECTID cell
#126 '('
#126 INT_CONST 0
#126 ')'
#127 ELSE
#128 OBJECTID cell
#128 '('
#128 OBJECTID position
#128 '+'
#128 INT_CONST 1
#128 ')'
#129 FI
#130 '}'
#130 ';'
#134 OBJECTID cell_at_next_evolution
#134 '('
#134 OBJECTID position
#134 ':'
#134 TYPEID Int
#134 ')'
#134 ':'
#134 TYPEID String
#134 '{'
#135 IF
#135 '('
#135 IF
#135 OBJECTID cell
#135 '('
#135 OBJECTID position
#135 ')'
#135 '='
#135 STR_CONST "X"
#135 THEN
#135 INT_CONST 1
#135 ELSE
#135 INT_CONST 0
#135 FI
#136 '+'
#136 IF
#136 OBJECTID cell_left_neighbor
#136 '('
#136 OBJECTID position
#136 ')'
#136 '='
#136 STR_CONST "X"
#136 THEN
#136 INT_CONST 1
#136 ELSE
#136 INT_CONST 0
#136 FI
#137 '+'
#137 IF
#137 OBJECTID cell_right_neighbor
#137 '('
#137 OBJECTID position
#137 ')'
#137 '='
#137 STR_CONST "X"
#137 THEN
#137 INT_CONST 1
#137 ELSE
#137 INT_CONST 0
#137 FI
#138 '='
#138 INT_CONST 1
#138 ')'
#139 THEN
#140 STR_CONST "X"
#141 ELSE
#142 ERROR "'"
#142 '.'
#142 ERROR "'"
#143 FI
#144 '}'
#144 ';'
#146 OBJECTID evolve
#146 '('
#146 ')'
#146 ':'
#146 TYPEID SELF_TYPE
#146 '{'
#147 '('
#147 LET
#147 OBJECTID position
#147 ':'
#147 TYPEID Int
#147 IN
#148 '('
#148 LET
#148 OBJECTID num
#148 ':'
#148 TYPEID Int
#148 ASSIGN
#148 OBJECTID num_cells
#148 ERROR "["
#148 ERROR "]"
#148 IN
#149 '('
#149 LET
#149 OBJECTID temp
#149 ':'
#149 TYPEID String
#149 IN
#150 '{'
#151 WHILE
#151 OBJECTID position
#151 '<'
#151 OBJECTID num
#151 LOOP
#152 '{'
#153 OBJECTID temp
#153 ASSIGN
#153 OBJECTID temp
#153 '.'
#153 OBJECTID concat
#153 '('
#153 OBJECTID cell_at_next_evolution
#153 '('
#153 OBJECTID position
#153 ')'
#153 ')'
#153 ';'
#154 OBJECTID position
#154 ASSIGN
#154 OBJECTID position
#154 '+'
#154 INT_CONST 1
#154 ';'
#155 '}'
#156 POOL
#156 ';'
#157 OBJECTID population_map
#157 ASSIGN
#157 OBJECTID temp
#157 ';'
#158 OBJECTID self
#158 ';'
#159 '}'
#160 ')'
#160 ')'
#160 ')'
#161 '}'
#161 ';'
#162 '}'
#162 ';'
#164 CLASS
#164 TYPEID Main
#164 '{'
#165 OBJECTID cells
#165 ':'
#165 TYPEID CellularAutomaton
#165 ';'
#167 OBJECTID main
#167 '('
#167 ')'
#167 ':'
#167 TYPEID SELF_TYPE
#167 '{'
#168 '{'
#169 OBJECTID cells
#169 ASSIGN
#169 '('
#169 NEW
#169 TYPEID CellularAutomaton
#169 ')'
#169 '.'
#169 OBJECTID init
#169 '('
#169 STR_CONST "         X         "
#169 ')'
#169 ';'
#170 OBJECTID cells
#170 '.'
#170 OBJECTID print
#170 '('
#170 ')'
#170 ';'
#171 '('
#171 LET
#171 OBJECTID countdown
#171 ':'
#171 TYPEID Int
#171 ASSIGN
#171 INT_CONST 20
#171 IN
#172 WHILE
#172 OBJECTID countdown
#172 ERROR ">"
#172 INT_CONST 0
#172 LOOP
#173 '{'
#174 OBJECTID cells
#174 '.'
#174 OBJECTID evolve
#174 '('
#174 ')'
#174 ';'
#175 OBJECTID cells
#175 '.'
#175 OBJECTID print
#175 '('
#175 ')'
#175 ';'
#176 OBJECTID countdown
#176 ASSIGN
#176 OBJECTID countdown
#176 '-'
#176 INT_CONST 1
#176 ';'
#178 POOL
#179 ')'
#179 ';'
#184 ERROR "EOF in comment"
